{
  "$schema": "https://opencode.ai/config.json",

  // ═══════════════════════════════════════════════════════════
  //  Aegis v3 — Enterprise Parallel Development Swarm
  //  "One shield becomes many. Your code never leaves."
  //
  //  Commander ──┬── Worker "대시보드" ──┬── Scout
  //              │                      └── Librarian
  //              ├── Worker "게시판"   ──┬── Scout
  //              │                      └── Librarian
  //              └── Worker "결제"     ──┬── Scout
  //                                     └── Librarian
  //
  //  All on ONE model, ONE vLLM server.
  // ═══════════════════════════════════════════════════════════

  "model": "qwen-local/qwen3-coder-next",
  "default_agent": "commander",

  "provider": {
    "qwen-local": {
      "npm": "@ai-sdk/openai-compatible",
      "name": "Qwen3-Coder-Next (Private vLLM)",
      "options": {
        "baseURL": "http://localhost:8001/v1",
        "apiKey": "EMPTY"
      },
      "models": {
        "qwen3-coder-next": {
          "name": "Qwen3-Coder-Next 80B FP8",
          "contextWindow": 131072,
          "maxTokens": 16384,
          "toolCallSupport": true
        }
      }
    }
  },

  "agent": {
    // ─── Commander: 사용자와 설계 + 작업 분배 + 최종 QA ───
    "commander": {
      "model": "qwen-local/qwen3-coder-next",
      "system": ".opencode/agents/commander.md",
      "mode": "primary",
      "temperature": 0.2,
      "maxTokens": 16384,
      "color": "#3B82F6"
    },

    // ─── Worker: 기능별 독립 구현자 (동적 생성) ──────────
    "worker": {
      "model": "qwen-local/qwen3-coder-next",
      "system": ".opencode/agents/worker.md",
      "mode": "subagent",
      "hidden": true,
      "temperature": 0.2,
      "maxTokens": 16384,
      "color": "#F59E0B"
    },

    // ─── Scout: 읽기 전용 코드 탐색기 ────────────────────
    "scout": {
      "model": "qwen-local/qwen3-coder-next",
      "system": ".opencode/agents/scout.md",
      "mode": "subagent",
      "hidden": true,
      "temperature": 0.1,
      "maxTokens": 8192,
      "color": "#10B981",
      "tools": {
        "edit": false,
        "write": false,
        "task": false
      },
      "permissions": {
        "bash": {
          "deny": ["rm *", "mv *", "git commit*", "git push*", "npm publish*"]
        }
      }
    },

    // ─── Librarian: 읽기 전용 문서 연구자 ────────────────
    "librarian": {
      "model": "qwen-local/qwen3-coder-next",
      "system": ".opencode/agents/librarian.md",
      "mode": "subagent",
      "hidden": true,
      "temperature": 0.1,
      "maxTokens": 8192,
      "color": "#8B5CF6",
      "tools": {
        "edit": false,
        "write": false,
        "task": false
      },
      "permissions": {
        "bash": {
          "deny": ["rm *", "mv *", "git commit*", "git push*"]
        }
      }
    }
  },

  "plugin": [".opencode/plugins/aegis-plugin.ts"],

  "mcp": {
    "filesystem": {
      "type": "stdio",
      "command": "npx",
      "args": ["-y", "@anthropic-ai/filesystem-mcp", "."]
    },
    "context7": {
      "type": "stdio",
      "command": "npx",
      "args": ["-y", "@context7/mcp"]
    },
    "grep-app": {
      "type": "stdio",
      "command": "npx",
      "args": ["-y", "@anthropic-ai/grep-app-mcp"]
    }
  },

  "share": false
}
